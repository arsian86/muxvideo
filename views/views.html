<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Mux Play Test</title>
    <!-- 這頁用來測試播放：貼 assetId → 依方案產生簽名 URL -->
    <script src="https://cdn.jsdelivr.net/npm/@mux/mux-player"></script>
  </head>
  <body>
    <h1>Play test</h1>
    <input id="asset" placeholder="貼 assetId" />
    <select id="plan">
      <option value="A">方案A 720p</option>
      <option value="B">方案B 1080p</option>
      <option value="C">方案C 4K</option>
    </select>
    <button id="btn">Play</button>
    <br /><mux-player id="player" controls style="width: 60%"></mux-player>

    <script type="module">
      // 取得 streamUrl 後丟給 <mux-player>
      document.getElementById("btn").onclick = async () => {
        const asset = document.getElementById("asset").value.trim();
        const plan = document.getElementById("plan").value;
        if (!asset) return alert("先貼 assetId");

        const { streamUrl } = await fetch(`/stream/${asset}?plan=${plan}`).then(
          (r) => r.json()
        );
        document.getElementById("player").src = streamUrl;
      };
    </script>
  </body>
</html>
